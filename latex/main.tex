% Load the kaobook class
\documentclass[
	fontsize=10pt, % Base font size
	twoside=false, % Use different layouts for even and odd pages (in particular, if twoside=true, the margin column will be always on the outside)
	%open=any, % If twoside=true, uncomment this to force new chapters to start on any page, not only on right (odd) pages
	secnumdepth=1, % How deep to number headings. Defaults to 1 (sections)
]{kaobook}

\usepackage{listings}
\usepackage{xcolor}

\lstset{
  backgroundcolor=\color{gray!10},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{red},
  commentstyle=\color{green!50!black}\itshape,
  numbers=left,
  numberstyle=\tiny\color{gray},
  frame=lines,
  rulecolor=\color{black!30},
  breaklines=true,
}

\linespread{1.25} 

% Setup

% Choose the language
\usepackage[english]{babel} % Load characters and hyphenation
\usepackage[english=british]{csquotes}	% English quotes

\usepackage[utf8]{inputenc} %to manage special characters
\usepackage[T1]{fontenc} %to manage special characters

% Load packages for testing
\usepackage{blindtext}
%\usepackage{showframe} % Uncomment to show boxes around the text area, margin, header and footer
%\usepackage{showlabels} % Uncomment to output the content of \label commands to the document where they are used

% Load the bibliography package
\usepackage{kaobiblio}
\addbibresource{references.bib} % Bibliography file

%%%%%%%%%%%%%%%%%%%COLORS%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[dvipsnames]{xcolor}
\usepackage[x11names]{xcolor}

\definecolor{blue}{RGB}{0,110,185}
\definecolor{green}{RGB}{0,128,0}
\definecolor{red}{RGB}{139,0,0}
\definecolor{purple}{RGB}{128,0,128}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	

% Load mathematical packages for theorems and related environments
\usepackage[framed,
theoremcolor = green,
definitioncolor = blue,
propositioncolor = red,
assumptioncolor = purple,
]{kaotheorems}

% Load the package for hyperreferences
\usepackage{kaorefs}

\makeindex[columns=3, title=Alphabetical Index, intoc] % Make LaTeX produce the files required to compile the index

\renewcommand{\marginlayout}{%
    \newgeometry{
        top=25mm,             % height of the top margin
        bottom=30mm,          % height of the bottom margin
        inner=24.8mm,           % width of the inner margin
        textwidth=127mm,        % width of the text
        marginparsep=8.2mm,     % width between text and margin
        marginparwidth=30mm,  % width of the margin
    }%
}

\usepackage{amsmath, amssymb, amsfonts} % for mathematical symbols and environments
\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n} % to get the right font for mathcal

\usepackage{comment} %to be able to comment out sections in the .tex files

\usepackage{pdfpages} % Include PDFs, specifically the title page

\usepackage[inkscapearea = page,
            inkscapelatex = false,
            inkscapepath = ./images/inkscape]{svg} %to be able to include svg files

\graphicspath{{./images/}} % Paths where images are looked for
\svgpath{{./images/}} % Paths where svg images are looked for

\usepackage{bm}
\newcommand{\vect}[1]{\bm{#1}} %for bold vectors

\usepackage{booktabs} %for better tables

\usepackage{multicol} %for multiple columns
\setlength{\columnseprule}{0.01pt}
\renewcommand{\columnseprulecolor}{\color[rgb]{0.9,0.9,0.9}}

\begin{document}

\includepdf[pages=-]{titlepage.pdf}

%----------------------------------------------------------------------------------------
%	BOOK INFORMATION
%----------------------------------------------------------------------------------------

\titlehead{Specialization Project}
\title[Energy-preservation in Operator Learning]{Energy-preservation in Operator Learning}
\author[EF]{Eirik Fagerbakke}
\date{\today}

%----------------------------------------------------------------------------------------

\frontmatter % Denotes the start of the pre-document content, uses roman numerals

%----------------------------------------------------------------------------------------
%	PREFACE
%----------------------------------------------------------------------------------------

%\chapter*{Preface}

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS & LIST OF FIGURES/TABLES
%----------------------------------------------------------------------------------------

\begingroup % Local scope for the following commands

% Define the style for the TOC, LOF, and LOT
%\setstretch{1} % Uncomment to modify line spacing in the ToC
%\hypersetup{linkcolor=blue} % Uncomment to set the colour of links in the ToC
\setlength{\textheight}{230\vscale} % Manually adjust the height of the ToC pages

% Turn on compatibility mode for the etoc package
\etocstandarddisplaystyle % "toc display" as if etoc was not loaded
\etocstandardlines % "toc lines as if etoc was not loaded

\tableofcontents % Output the table of contents

\listoffigures % Output the list of figures

% Comment both of the following lines to have the LOF and the LOT on different pages
\let\cleardoublepage\bigskip
\let\clearpage\bigskip

\listoftables % Output the list of tables

\endgroup

%----------------------------------------------------------------------------------------
%	MAIN BODY
%----------------------------------------------------------------------------------------

\mainmatter % Denotes the start of the main document content, resets page numbering and uses arabic numbers
\setchapterstyle{kao} % Choose the default chapter heading style

%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------

\newgeometry{
    top=25mm,             % height of the top margin
    bottom=30mm,          % height of the bottom margin
    inner=24.8mm,           % width of the inner margin
    textwidth=117mm,        % width of the text
    marginparsep=8.2mm,     % width between text and margin
    marginparwidth=40mm,  % width of the margin
}%
\input{Chapters/03Introduction}
\pagelayout{margin} % Restore margins

%----------------------------------------------------------------------------------------
%	THEORY
%----------------------------------------------------------------------------------------

\input{Chapters/04Theory}


%----------------------------------------------------------------------------------------
%	METHOD
%----------------------------------------------------------------------------------------

\input{Chapters/05Method}

%----------------------------------------------------------------------------------------
%	RESULTS
%----------------------------------------------------------------------------------------

\input{Chapters/06Results}

%----------------------------------------------------------------------------------------
%	DISCUSSION
%----------------------------------------------------------------------------------------

%----------------------------------------------------------------------------------------
%	CONCLUSION
%----------------------------------------------------------------------------------------


\appendix % From here onwards, chapters are numbered with letters, as is the appendix convention

\pagelayout{wide} % No margins
\addpart{Appendix}
\pagelayout{margin} % Restore margins

\input{Chapters/09Appendix}


%----------------------------------------------------------------------------------------

\backmatter % Denotes the end of the main document content
\setchapterstyle{plain} % Output plain chapters from this point onwards

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

% The bibliography needs to be compiled with biber using your LaTeX editor, or on the command line with 'biber main' from the template directory

\defbibnote{bibnote}{References given in citation order.\par\bigskip} % Prepend this text to the bibliography
\printbibliography[heading=bibintoc, title=Bibliography, prenote=bibnote] % Add the bibliography heading to the ToC, set the title of the bibliography and output the bibliography note

%----------------------------------------------------------------------------------------
%	INDEX
%----------------------------------------------------------------------------------------

% The index needs to be compiled on the command line with 'makeindex main' from the template directory

\printindex % Output the index

\end{document}